---
date: '2025-06-12T15:33:03+08:00'
draft: false
title: 'ä»é›¶å¼€å§‹æ­å»ºä¸ªäººç½‘ç«™ï¼ˆäºŒï¼‰'
# cover:
#      image: img/pikai.png
#      alt: 'This is a post image'
#      caption: 'This is the caption'
tags: ["ç½‘ç«™æ­å»º"]
categories: ["æŠ€æœ¯"]     
---
# ä¸€ã€åŸŸåé…ç½®
## 1ã€HTTPSè®¤è¯
ç»è¿‡ç¬¬ä¸€ç« èŠ‚å­¦ä¹ åŠæ“ä½œåï¼Œä½ å·²ç»æ‹¥æœ‰äº†ä¸¤å°æœ‰éƒ¨åˆ†åŸºç¡€èƒ½åŠ›çš„è½»é‡äº‘æœåŠ¡å™¨åŠä¸€ä¸ªä¸ªäººåŸŸåï¼Œä½†æ˜¯ç›®å‰è®¿é—®åŸŸåæ˜¯ä¸å®‰å…¨çš„ï¼Œé»˜è®¤`HTTP`åè®®è®¿é—®ï¼Œä¸ºäº†èŠ‚çº¦æˆæœ¬ï¼Œè¿™é‡Œä»‹ç»ä½¿ç”¨`Let's Encrypt`å…è´¹è¿›è¡Œè®¤è¯ï¼Œä»¥ä¸‹ä»¥æœ¬äººè‡ªè¡Œç”³è¯·çš„`pikai.cloud`åŸŸåæ¼”ç¤ºå¦‚ä½•ç”³è¯·`HTTPS`è¯ä¹¦

### 1.1ã€**<font style="color:rgb(64, 64, 64);">å®‰è£…Certbotå·¥å…·</font>**
<font style="color:rgb(64, 64, 64);">Certbotæ˜¯Let's Encryptçš„å®˜æ–¹å®¢æˆ·ç«¯ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–è¯ä¹¦ç”³è¯·å’Œç»­æœŸã€‚</font>

```shell
# å®‰è£…EPELä»“åº“ï¼ˆCentOS9é»˜è®¤å¯èƒ½å·²åŒ…å«ï¼‰
sudo dnf install epel-release -y
# å®‰è£…CertbotåŠNginxæ’ä»¶ï¼ˆå‡è®¾ä½¿ç”¨NginxæœåŠ¡å™¨ï¼‰
sudo dnf install certbot python3-certbot-nginx -y
```

### 1.2ã€<font style="color:rgb(64, 64, 64);">ç”³è¯·è¯ä¹¦</font>
<font style="color:rgb(64, 64, 64);">é€šè¿‡Certbotçš„Nginxæ’ä»¶è‡ªåŠ¨åŒ–ç”³è¯·è¯ä¹¦ï¼ˆéœ€ç¡®ä¿Nginxå·²é…ç½®åŸŸåè§£æï¼‰ï¼š</font>

```shell
sudo certbot --nginx -d pikai.cloud -d www.pikai.cloud
```

**<font style="color:#DF2A3F;">åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œå¦‚æœæ— æ³•è‡ªåŠ¨åŒ–ç”³è¯·è¯ä¹¦ï¼Œè¯·ä»¥æ‰‹åŠ¨DNSéªŒè¯	</font>**

---

### **1.3ã€æ‰‹åŠ¨ DNS éªŒè¯ï¼ˆæ— éœ€æ’ä»¶ï¼‰**
å¦‚æœä¸æƒ³ä¾èµ–å·¥å…·ï¼Œå¯æ‰‹åŠ¨å®Œæˆ DNS éªŒè¯ï¼š

#### 1. **ç”Ÿæˆ CSR æ–‡ä»¶**
```bash
sudo certbot certonly --manual --preferred-challenges dns -d pikai.cloud -d www.pikai.cloud
```

#### 2. **æ ¹æ®æç¤ºæ·»åŠ  DNS TXT è®°å½•**
   Certbot ä¼šè¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š

```plain
Please deploy a DNS TXT record under the name:
_acme-challenge.pikai.cloud with the following value:
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

+ ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å° â†’ åŸŸåè§£æ â†’ æ·»åŠ  TXT è®°å½•ï¼š
    - **ä¸»æœºè®°å½•**: `_acme-challenge`
    - **è®°å½•å€¼**: ä¸Šè¿°ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²
+ ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸ 1-5 åˆ†é’Ÿï¼‰ã€‚

![åŸŸåè§£æé…ç½®](/img/image2.png)

#### 3. **å®ŒæˆéªŒè¯**
   DNS ç”Ÿæ•ˆåï¼Œåœ¨ Certbot æç¤ºä¸­æŒ‰å›è½¦ç»§ç»­ï¼Œè¯ä¹¦å°†è‡ªåŠ¨ç­¾å‘ã€‚

---

### **1.4ã€é˜¿é‡Œäº‘ RAM æƒé™é…ç½®**
æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéœ€ç¡®ä¿é˜¿é‡Œäº‘ RAM ç”¨æˆ·å…·å¤‡ **DNS ç®¡ç†æƒé™**ï¼š

1. ç™»å½• [é˜¿é‡Œäº‘ RAM æ§åˆ¶å°](https://ram.console.aliyun.com/)ã€‚
2. åˆ›å»º RAM ç”¨æˆ·å¹¶å‹¾é€‰ **OpenAPI è°ƒç”¨è®¿é—®**ã€‚
3. æ·»åŠ æƒé™ç­–ç•¥ï¼š**AliyunDNSFullAccess**ï¼ˆDNS ç®¡ç†æƒé™ï¼‰ã€‚
4. è·å–ç”¨æˆ·çš„ **AccessKey ID** å’Œ **AccessKey Secret**ã€‚

---

# äºŒã€éªŒè¯è¯ä¹¦å¹¶é…ç½® Nginx
#### 1. **æ£€æŸ¥è¯ä¹¦è·¯å¾„**
```bash
sudo ls -l /etc/letsencrypt/live/pikai.cloud/
# åº”åŒ…å« fullchain.pem å’Œ privkey.pem
```

#### 2. **Nginx SSL é…ç½®ç¤ºä¾‹**
```nginx
server {
    listen 443 ssl;
    server_name pikai.cloud www.pikai.cloud;

    ssl_certificate /etc/letsencrypt/live/pikai.cloud/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/pikai.cloud/privkey.pem;

    # å…¶ä»–é…ç½®ï¼ˆå¦‚æ ¹ç›®å½•ã€åå‘ä»£ç†ç­‰ï¼‰
    root /var/www/html;
    index index.html;
}
```

---

# ä¸‰ã€å®ŒæˆéªŒè¯
å®Œæˆä¸Šè¿°é…ç½®åé‡å¯`nginx`ï¼Œè®¿é—®`**https://pikai.cloud**`å¯ä»¥çœ‹åˆ°ç½‘é¡µå±•ç¤ºå¦‚ä¸‹ï¼Œæ­å–œä½ é…ç½®æ­£å¸¸ç”Ÿæ•ˆï¼Œæ¥ä¸‹æ¥å¯ä»¥éƒ¨ç½²è‡ªå·±çš„ç½‘ç«™äº†ğŸ¥°ğŸ˜ŠğŸ‰ğŸ‰ğŸ‰**ï¼ˆç”±äºæœ¬äººå·²ç»åœ¨pikai.cloudéƒ¨ç½²äº†é¡¹ç›®ï¼Œè¿™é‡Œç”¨å­åŸŸååšæ¼”ç¤ºï¼‰**

![Httpsè®¿é—®](/img/image3.png)

